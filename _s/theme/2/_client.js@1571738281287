"use strict";flexbe_cli.block.register(111,{mapInit:!1,index:!1,onLoad:function(){var t=this;this.$map=$(".component-map",this.$block),this.$map.length?this.initMap():setTimeout(function(){t.onLoad()},50)},initMap:function(){var t=this;if(this.data=this.$map.data("data"),this.$map.on("mapInit",function(){t.mapInit=!0,t.selectMark(t.index||0,!0)}),this.$block.find(".tab-list").on("click","a",function(i){var a=parseInt($(i.currentTarget).closest(".tab").attr("data-item-id"),10)-1;t.selectMark(a)}),this.$map.on("balloonOpen",function(i,a){t.selectMark(a)}),flexbe_cli.is_admin){var i=this.$map[0].offsetHeight;clearInterval(this.timer),this.timer=setInterval(function(){var a=t.$map[0].offsetHeight;a!=i&&(i=a,t.$map.trigger("resizeMap"))},100)}},selectMark:function(t,i){void 0===i&&(i=!1);var a=this.data.places[t];if(a&&(this.index!=t||i)){this.index=t;var e=this.$block.find(".tab-list"),s=this.$block.find(".item-list");e.find(".active").removeClass("active"),s.find(".active").removeClass("active"),e.find('[data-item-id="'+(this.index+1)+'"]').addClass("active"),s.find('[data-item-id="'+(this.index+1)+'"]').addClass("active"),this.data.center=a.coords,this.$map.trigger("selectMark",this.index)}}});
"use strict";flexbe_cli.block.register(2,{onLoad:function(){var e=this.$block.find('.component-menu[data-style="opacity"]');e.on("mouseenter","a",function(o){e.addClass("hover")}).on("mouseleave","a",function(o){e.removeClass("hover")})}});
"use strict";flexbe_cli.block.register(20,{onLoad:function(){var l=this;if(!flexbe_cli.is_admin){var c=this.$block.find(".component-scroll-down");c.length&&c.on("click",function(){flexbe_cli.scroll.scrollTo(l.$block.next())})}}});
"use strict";flexbe_cli.block.register(21,{onLoad:function(){var l=this;if(!flexbe_cli.is_admin){var c=this.$block.find(".component-scroll-down");c.length&&c.on("click",function(){flexbe_cli.scroll.scrollTo(l.$block.next())})}}});
"use strict";flexbe_cli.block.register(22,{onLoad:function(){var l=this;if(!flexbe_cli.is_admin){var c=this.$block.find(".component-scroll-down");c.length&&c.on("click",function(){flexbe_cli.scroll.scrollTo(l.$block.next())})}}});
"use strict";flexbe_cli.block.register(23,{onLoad:function(){var l=this;if(!flexbe_cli.is_admin){var c=this.$block.find(".component-scroll-down");c.length&&c.on("click",function(){flexbe_cli.scroll.scrollTo(l.$block.next())})}}});
"use strict";
"use strict";flexbe_cli.block.register(34,{mapInit:!1,index:!1,onLoad:function(){var t=this;if(this.$map=$(".component-map",this.$block),this.data=this.$map.data("data"),flexbe_cli.is_admin){var i=this.$map[0].offsetHeight;clearInterval(this.timer),this.timer=setInterval(function(){var a=t.$map[0].offsetHeight;a!=i&&(i=a,t.$map.trigger("resizeMap"))},100)}}});
"use strict";
"use strict";flexbe_cli.block.register(42,{onLoad:function(){var t=this,i=this.$block.find(".title-holder"),e=this.$block.find(".content-holder");i.on("click",".item",function(a){var c=$(a.currentTarget),d=+c.attr("data-item-id");i.find(".item").removeClass("active"),c.addClass("active"),e.find(".item").removeClass("active").closest('[data-item-id="'+d+'"]').addClass("active"),t.$block.find("[data-active]").attr("data-active",d)})}});
"use strict";flexbe_cli.block.register(44,{onLoad:function(){var i=this;flexbe_cli.is_admin&&(setTimeout(function(){i.set_width()},300),$(window).on("resize.b44 orientationchange.b44",function(){i.set_width()}))},set_width:function(){var i=this.$block.find(".fake-table"),t=i.find(".fake-td").css("width",""),e=i.find(".fake-tr").eq(0).find(".fake-td").length,n=i.innerWidth();n<300||t.css("width",n/e+"px")}});
"use strict";flexbe_cli.block.register(50,{require:["/_s/lib/swiper/swiper.v4.js"],onLoad:function(i){var e=this,s=this.$block.find(".slider"),t=this.$block.find(".slider-button"),a=this.$block.find(".slider-pagination"),l=s.data("count");if(1!=l){this.slideshow=Math.floor(s.data("slideshow"));var o=!flexbe_cli.is_admin&&l>1,n={prevEl:t[0],nextEl:t[1]},r={el:a[0],type:"bullets",clickable:!0},d=!1;!flexbe_cli.is_admin&&this.slideshow&&(d={delay:this.slideshow});var p=Math.floor(e.$block.data("slide-move"))||0;p>=l&&(p=l-1),p<0&&(p=0),this.swiper=new Swiper(s[0],{wrapperClass:"slider-wrapper",slideClass:"slide",slideActiveClass:"active",noSwipingClass:"fr-element",simulateTouch:!flexbe_cli.is_admin,touchMoveStopPropagation:!1,preventClicksPropagation:!1,preventClicks:!1,spaceBetween:30,autoHeight:!1,initialSlide:p,navigation:n,pagination:r,autoplay:d,loop:o,on:{slideChange:function(){e.$block.data("slide-move",this.activeIndex)}}}),i&&"items_add"===i.reason&&this.swiper.slideTo(i.reasonData.to)}},onFocus:function(i){this.swiper&&this.swiper.autoplay&&this.slideshow&&(i?this.swiper.autoplay.run():this.swiper.autoplay.pause())}});
"use strict";flexbe_cli.block.register(51,{require:["/_s/lib/swiper/swiper.v4.js"],onLoad:function(i){var e=this,s=this,t=this.$block.find(".slider"),a=this.$block.find(".slider-button"),l=this.$block.find(".slider-pagination"),o=t.find(".info-wrapper > .item"),n=t.data("count");if(1!=n){this.slideshow=Math.floor(t.data("slideshow"));var r={prevEl:a[0],nextEl:a[1]},d={el:l[0],type:"bullets",clickable:!0},p=!1;!flexbe_cli.is_admin&&this.slideshow&&(p={delay:this.slideshow});var c=Math.floor(this.$block.data("slide-move"))||0;void 0===c&&(c=3===n?1:0),c>=n&&(c=n-1),c<0&&(c=0),this.swiper=new Swiper(t[0],{wrapperClass:"slider-wrapper",slideClass:"slide",slideActiveClass:"active",noSwipingClass:"fr-element",touchMoveStopPropagation:!1,preventClicksPropagation:!1,preventClicks:!1,spaceBetween:0,autoHeight:!1,paginationClickable:!0,initialSlide:c,navigation:r,pagination:d,autoplay:p,loop:!1,on:{init:function(){h(this.activeIndex)},slideChange:function(){h(this.activeIndex)}}}),i&&"items_add"===i.reason&&this.swiper.slideTo(i.reasonData.to),o.on("click",function(i){var s=$(i.currentTarget).index();e.swiper.slideTo(s)})}function h(i){s.$block.data("slide-move",i),o.removeClass("selected").eq(i).addClass("selected")}},onFocus:function(i){this.swiper&&this.swiper.autoplay&&this.slideshow&&(i?this.swiper.autoplay.run():this.swiper.autoplay.pause())}});
"use strict";
"use strict";flexbe_cli.block.register(61,{onLoad:function(){var e=this.$block.find(".item").addClass("noanimate").removeClass("closed");e.find(".list").css("max-height",""),flexbe_cli.is_admin||"true"!=this.$block.find(".container").attr("data-expand")?this.$block.find(".toggle-list").remove():(e.find(".list").each(function(e,t){var i=t.offsetHeight;i&&(t.style.maxHeight=i+30+"px")}),e.addClass("closed").removeClass("noanimate"),this.$block.on("click",".item > .data, .toggle-list",function(e){$(e.currentTarget).closest(".item").toggleClass("closed")}))}});
"use strict";flexbe_cli.block.register(71,{onLoad:function(){flexbe_cli.is_admin||this.$block.on("click",".content-wrapper",function(t){$(t.target).closest(".component-button, .slider-button")[0]||$(t.target).is(".component-button, .slider-button")||$(t.currentTarget).find(".button-holder a").trigger("click")})}});
"use strict";
"use strict";
"use strict";flexbe_cli.block.register(82,{onLoad:function(){var e=this.$block.find(".single-image-container");this.$block.find(".image-wrapper").on("click",".image-item",function(i){i.preventDefault(),i.stopPropagation();var a=$(i.currentTarget).data("itemId");$(i.currentTarget).addClass("active").siblings().removeClass("active"),e.find('[data-item-id="'+a+'"]').addClass("active").siblings().removeClass("active")})}});
"use strict";flexbe_cli.block.register(83,{onLoad:function(){flexbe_cli.run.is_safari&&this.$block.find(".image-item").css("transform","translateZ(0)")}});
"use strict";flexbe_cli.block.register(84,{onLoad:function(){var e=this;this.$block.find(".video-preview").on("click",function(i){i.preventDefault(),e.$block.find("iframe")[0].src+="&autoplay=1",setTimeout(function(){$(i.currentTarget).addClass("hide")},100)})}});
"use strict";flexbe_cli.block.register(85,{onLoad:function(){var e=this;flexbe_cli.is_admin||this.$block.find(".play").on("click",function(i){i.preventDefault(),e.$block.find("iframe")[0].src+="&autoplay=1",setTimeout(function(){$(i.currentTarget).closest(".video").addClass("played")},100)})}});
"use strict";flexbe_cli.block.register(86,{require:["/_s/lib/swiper/swiper.v3.js"],onLoad:function(e){var i=this,t=this,a=this.$block.find(".slider"),s=this.$block.find(".slider-button"),n=this.$block.find(".slider-pagination"),r=this.$block.find(".text-labels"),l=a.data("count");this.slideshow=Math.floor(a.data("slideshow"));var d=Math.floor(t.$block.data("slide-move"))||0;if(d>=l&&(d=l-1),d<0&&(d=0),this.swiper=new Swiper3(a[0],{wrapperClass:"slider-wrapper",slideClass:"slide",slideActiveClass:"active",noSwipingClass:"redactor-box",pagination:n[0],prevButton:s[0],nextButton:s[1],touchMoveStopPropagation:!1,preventClicksPropagation:!1,preventClicks:!1,spaceBetween:5,autoHeight:!1,paginationClickable:!0,virtualTranslate:!0,initialSlide:d,autoplay:!flexbe_cli.is_admin&&this.slideshow,onProgress:function(e,i){if(void 0===e.activeIndex)return!0;var t=1/(e.slides.length-1),a=(i-t*e.activeIndex)/t,s=Math.abs(a),n=e.slides[e.activeIndex],l=$(e.slides).closest("next"==e.swipeDirection?".swiper-slide-next":".swiper-slide-prev")[0];requestAnimationFrame(function(){s>.01&&s<.99?(e.animating=!0,e.wrapper.removeClass("allow-animate"),n&&(n.style.opacity=Math.abs(s-1),n.style.transform="scale("+(1+.05*s)+")"),l&&(l.style.opacity=s,l.style.transform="scale("+(.2*Math.abs(s-1)+1)+")",l.style.transformOrigin=(e.swipeDirection,"left"),r.children().removeClass("current prev"),r.find('[data-item-id="'+(e.activeIndex+1)+'"]').addClass("prev"))):(e.animating=!1,e.wrapper.addClass("allow-animate"),n&&(n.style.transform=null,n.style.opacity=null),l&&(l.style.transformOrigin=null,l.style.transform=null,l.style.opacity=null),r.find('[data-item-id="'+(e.activeIndex+1)+'"]').addClass("current"),e.wrapper.trigger("transitionend"))})},onInit:function(e){r.find('[data-item-id="'+(e.activeIndex+1)+'"]').addClass("current")},onSlideChangeEnd:function(e){r.children().removeClass("current prev"),r.find('[data-item-id="'+(e.previousIndex+1)+'"]').addClass("prev"),r.find('[data-item-id="'+(e.activeIndex+1)+'"]').addClass("current"),t.$block.data("slide-move",e.activeIndex)}}),e&&"items_add"===e.reason&&this.swiper.slideTo(e.reasonData.to),flexbe_cli.is_admin){var o=a[0].offsetHeight;clearInterval(this.timer),this.timer=setInterval(function(){var e=a[0].offsetHeight;e!=o&&(i.swiper.update(),o=e)},100)}}});
"use strict";flexbe_cli.block.register(92,{});
"use strict";flexbe_cli.modal.register(100,{types:{},pay_id:"",hash:"",selectors:{},onLoad:function(){var t=this;this.start(),flexbe_cli.events.on("pay",function(a,e){e&&"init"==e.action&&t.start()})},start:function(){this.loadSelectors();var t=this.getQueryParams();if(t){switch(t){case"success":this.showSuccessAlert();break;case"fail":this.showFailAlert();break;case"pay":this.getBill()}setTimeout(function(){flexbe_cli.modal.open("pay")},300)}},loadSelectors:function(){this.selectors.$container=this.$modal.find(".container"),this.selectors.$bill=this.$modal.find(".action-bill"),this.selectors.$cash=this.$modal.find(".action-cash"),this.selectors.$already=this.$modal.find(".action-already"),this.selectors.$success=this.$modal.find(".action-success"),this.selectors.$fail=this.$modal.find(".action-fail")},getQueryParams:function(){var t=!1;try{t=JSON.parse('{"'+decodeURI(location.search.substring(1)).replace(/"/g,'\\"').replace(/&/g,'","').replace(/=/g,'":"')+'"}')}catch(t){}if(!t.pay_id)return!1;if(this.pay_id=t.pay_id,this.hash=t.h,t.pay_status){try{history.pushState(null,null,window.location.pathname)}catch(t){}return t.pay_status}return"pay"},getBill:function(){var t=this;this.pay_id&&!1!==this.pay_id&&$.ajax({url:"/mod/pay/ajax",type:"GET",dataType:"json",data:{act:"payData",pay_id:this.pay_id,hash:this.hash}}).done(function(a){if(0===a.status)return!1;t.types=a.pay.support_types,2==a.pay.pay_status?t.showAlreadyPayed(a.pay):t.cashonly()?t.showCashInstruction(a.pay):t.showBillForm(a.pay)})},showBillForm:function(t){var a=this,e={bank_card:"cards",cash:"cash",visa:"visa",mastercard:"mastercard",yandex:"yandex",qiwi:"qiwi",webmoney:"webmoney",webmoney_z:"webmoney",webmoney_u:"webmoney",mobile_megafon:"megafon",mobile_beeline:"bee",mobile_mts:"mts",mobile_tele2:"t2",sberbank:"sberbank",bank:"bank",w1:"w1",ibank_robo:"ibank_robo",yandex_kassa:"yandexkassa",yandexkassa:"yandexkassa",bank_company:"bank_company"},s=this.selectors.$bill.find(".pay-methods-list").empty(),i=this.selectors.$bill.find(".pay-action");this.selectors.$container.attr("data-type","bill"),Object.entries(this.types).forEach(function(t,a){var i=t[0],n=(t[1],flexbe_cli.locale.tr("pay.methods."+i)),c='<label class="item" data-type="'+i+'" title="'+n+'" for="'+i+'">\n                            <input type="radio" name="form[pay_method]" value="'+i+'" id="'+i+'"'+(0===a?'checked="checked"':"")+'>\n\n                            <div class="preview">\n                                <img class="icon-inner" src="/_s/images/v3/theme/res/pay/'+e[i]+'.svg" />\n                            </div>\n                            <span>'+n+"</span>\n                        </label>";s.append(c)}),i.find(".issue-num").text(t.pay_id),i.find(".price").text(flexbe_cli.locale.formatMoney(t.pay_sum)),s.on("click",".item",function(t){return t.preventDefault(),$(t.currentTarget).find("input").prop("checked",!0),!1}),i.find(".btn-wrap a").on("click",function(t){var e=s.find("input:checked").val();if(!e)return alert("Выберите способ оплаты"),!1;if("cash"==e)return a.showCashInstruction(),!1;var i="/mod/pay/?pay_type="+e+"&pay_id="+a.pay_id+"&h="+a.hash;$(t.currentTarget).attr("href",i),flexbe_cli.run.is_mobile&&flexbe_cli.run.is_OSX||$(t.currentTarget).addClass("busy")})},showCashInstruction:function(){this.selectors.$container.attr("data-type","cash"),this.types.cash&&this.types.cash.instruction&&this.selectors.$cash.find(".text").html(this.types.cash.instruction),$.ajax({url:"/mod/pay/ajax",type:"GET",dataType:"json",data:{act:"selectCash",pay_id:this.pay_id,hash:this.hash}})},showAlreadyPayed:function(t){this.selectors.$container.attr("data-type","already");var a=this.selectors.$already.find(".pay-action"),e="";"0"!=t.pay_time_done&&t.pay_time_done_formatted&&(e=t.pay_time_done_formatted),this.selectors.$already.find(".text > span.num").text(t.pay_id),a.find(".title > span.num").text(t.pay_id),a.find(".sub > span").text(e),a.find(".price").text(flexbe_cli.locale.formatMoney(t.pay_sum))},showSuccessAlert:function(){this.selectors.$container.attr("data-type","success"),flexbe_cli.stat.reachGoal(flexbe_cli.stat.goals.pay_done)},showFailAlert:function(){var t=this;this.selectors.$container.attr("data-type","fail"),this.selectors.$fail.find(".component-button").off("click").on("click",function(){t.getBill()})},cashonly:function(){return!(!this.types.cash||1!=Object.keys(this.types).length)}});
"use strict";flexbe_cli.modal.register(20,{onClose:function(){this.resetVideo()},resetVideo:function(){var e=this.$modal.find("iframe")[0];if(e){var i=e.src;e.src="",e.src=i}}});
"use strict";flexbe_cli.modal.register(21,{require:["/_s/lib/swiper/swiper.v4.js"],onLoad:function(i){this.isOpen&&this.initSwiper(i)},onOpen:function(){this.loaded&&this.initSwiper()},onClose:function(){this.destroySwiper(),this.resetVideo()},resetVideo:function(){var i=this.$modal.find("iframe")[0];if(i){var e=i.src;i.src="",i.src=e}},initSwiper:function(i){var e=this,t=this,s=this.$modal.find(".slider"),n=this.$modal.find(".info-wrapper > .item"),o=this.$modal.find(".slider-pagination"),a=s.data("count");if(!(a<=1)){var r={el:o[0],type:"bullets",clickable:!0},d=Math.floor(this.$modal.data("slide-move"))||0;d>=a&&(d=a-1),d<0&&(d=0),this.swiper=new Swiper(s[0],{wrapperClass:"slider-wrapper",slideClass:"slide",slideActiveClass:"active",noSwipingClass:"redactor-box",loop:!1,initialSlide:d,pagination:r,touchMoveStopPropagation:!0,preventClicksPropagation:!0,preventClicks:!1,spaceBetween:0,autoHeight:!1,paginationClickable:!0,on:{init:function(){l(this.activeIndex)},slideChange:function(){t.$modal.data("slide-move",this.activeIndex),l(this.activeIndex)}}}),i&&"items_add"===i.reason&&this.swiper.slideTo(i.reasonData.to),n.on("click",function(i){i.preventDefault();var t=$(i.currentTarget).index();return e.swiper&&e.swiper.slideTo(t),!1})}function l(i){n.removeClass("selected").eq(i).addClass("selected")}},destroySwiper:function(){this.swiper&&"function"==typeof this.swiper.destroy&&this.swiper.destroy()}});
"use strict";flexbe_cli.modal.register(3,{onInit:function(){this.video=this.$modal.find("iframe")[0],this.videoOrigin=this.video?this.video.src||this.video.getAttribute("data-src"):""},onOpen:function(){this.bindVideo(!0)},onClose:function(){this.bindVideo(!1)},bindVideo:function(i){if(void 0===i&&(i=!1),!this.video)return!1;this.video.src&&i||(this.video.src="",this.video.src=this.videoOrigin)}});
"use strict";flexbe_cli.widget.register(1,{list:[],$list:null,$sum:null,$button:null,is_open:!1,is_expend:!1,onInit:function(){this.$container=this.$widget.find(".widget-container"),this.$list=this.$widget.find(".order-list > ul"),this.$sum=this.$widget.find(".checkout .price"),this.$button=this.$widget.find(".cart-button"),this.events(),flexbe_cli.is_admin?this.list=[{id:"7832324_1",count:1,img:"/img/1000000945_200.jpg",title:"Тестовый товар 1",price:750},{id:"7832464_2",count:2,img:"/img/1000000948_200.jpg",title:"Тестовый товар 2",price:2550}]:this.loadFromStorage(),this.renderList()},onLoad:function(){this.formInit()},onUpdate:function(){this.onInit(),this.is_open&&(this.$container.addClass("fade-in noanimate"),this.open(),this.expend&&(this.$container.addClass("state-1 state-2"),this.animateForm(!1)))},formInit:function(){var t=this;flexbe_cli.components.instances[this.id].forEach(function(i){"form"===i.is&&(t.form=i,i.onBeforeSend(function(){i.addItems(t.list)}),i.onAfterSent(function(){flexbe_cli.stat.ecommerce.purchase(t.list),t.list=[],t.renderList(),t.close()}))})},events:function(){var t=this;flexbe_cli.events.off("cart_command.w1").on("cart_command.w1",function(i,e){if(e)switch(e.command){case"toggle":t.is_open?t.close():t.open();break;case"open":t.open(e);break;case"close":t.close(e);break;case"add":t.add(e.item);break;case"remove":t.remove(e.id)}}),this.$widget.off("click.cart-button").on("click.cart-button",".cart-button",function(){t.$container.hasClass("show")?t.close():t.open()}),this.$list.off("click").on("click","[data-action]",function(i){var e=$(i.currentTarget).closest("li"),n=$(i.currentTarget).data("action"),s=e.data("id");s&&("remove"==n?t.remove(s):t.updateCount(s,n))}),this.$list.off("input").on("input",".count",function(i){var e=$(i.currentTarget).closest("li").attr("data-id"),n=+i.target.value;n||(n=1,$(i.currentTarget).val(1)),t.updateCount(e,n)}),this.$container.find(".cart-container .button").off("click").on("click","a",function(){t.animateForm()}),this.$container.off("click.times-close").on("click.times-close","a.close, > .overlay, .container",function(i){($(i.target).is(".container")||$(i.currentTarget).is("a.close, .overlay"))&&t.close()}),$(document).off("keyup.cart_esc_close").on("keyup.cart_esc_close",function(i){27==i.which&&t.close()})},open:function(){var t=this;if(this.is_open=!0,this._onScreen({state:!0}),this._onView({state:!0}),flexbe_cli.is_admin?(this.$container.addClass("is-editor"),$(".container-list").addClass("editor_stop")):this.loadFromStorage(),this.renderList(),$("body").addClass("overflow"),this.$container.addClass("show"),setTimeout(function(){t.$container.addClass("fade-in"),t.$list[0].offsetHeight>flexbe_cli.resize.height&&t.$container.find(".container").css("height","auto")},50),setTimeout(function(){t.$container.removeClass("noanimate")},300),flexbe_cli.run.is_OSX&&flexbe_cli.run.is_mobile){this.lastScroll=flexbe_cli.scroll.latest;var i=this.$container.find(".container").height();$(".container-list, .modal-list, .mobile-menu, header, footer").css({display:"none"}),this.$button.css("display","none"),this.$container.css({position:"relative",height:Math.max(i,flexbe_cli.resize.height)+"px",minHeight:flexbe_cli.resize.height+"px"}),$("body, html").scrollTop(0)}flexbe_cli.events.emit("cart_opened")},close:function(){var t=this;$(window).off("keyup.cart_esc_close"),this.is_open&&(this.is_open=!1,this.expend=!1,this.$container.hasClass("state-2")?this.$container.addClass("fade-out"):this.$container.removeClass("fade-in"),setTimeout(function(){t.$container.removeClass("show fade-in fade-out noanimate state-1 state-2"),t.$widget.find(".container, .form-container, .cart-container, .form-holder, .button").removeAttr("style"),$("body").removeClass("overflow"),$(".container-list").removeClass("editor_stop")},300),flexbe_cli.run.is_OSX&&flexbe_cli.run.is_mobile&&(this.$container.css({position:"",height:"",minHeight:""}),$(".container-list, .modal-list, .mobile-menu, header, footer").css({display:""}),this.$button.css("display",""),$("body, html").scrollTop(this.lastScroll)),flexbe_cli.events.emit("cart_closed"))},animateForm:function(t){var i=this;void 0===t&&(t=!0);var e=this.$container.find(".container"),n=e.find(".form-container"),s=e.find(".cart-container");if(this.expend=!0,flexbe_cli.run.is_screen_tablet_s||flexbe_cli.run.is_screen_mobile)this.$container.addClass("state-1"),e.height(Math.max(n.outerHeight(),s.outerHeight())),setTimeout(function(){i.$container.addClass("state-2"),i.$container.scrollTop(0)},t?50:0);else{e.addClass("recalculate");var o=e[0].offsetHeight;e.removeClass("recalculate"),o<500&&flexbe_cli.resize.height>500&&(o=500),setTimeout(function(){i.$container.addClass("state-1")},t?50:0),setTimeout(function(){e.css({height:o+"px",minHeight:o+"px"}),i.$container.addClass("state-2"),i.$container.scrollTop(0)},t?150:0)}},add:function(t,i){var e=this;if(void 0===i&&(i=!1),(!this.is_open||i)&&t){t.count=parseInt(t.count,10)||1,t.price=parseFloat(t.price)||0;var n=!1;this.list&&this.list.length&&(this.list=this.list.map(function(i){return i.id==t.id&&(i.count+=t.count,n=!0),i})),n||this.list.push(t),flexbe_cli.stat.ecommerce.add(t.id,t.title,t.count,t.price),flexbe_cli.stat.reachGoal(flexbe_cli.stat.goals.cart,t),this.renderList(),1===this.list.length&&1===this.list[0].count&&setTimeout(function(){e.open()},200),this.$button.removeClass("blink"),setTimeout(function(){e.$button.addClass("blink")},50)}},remove:function(t){if(void 0===t&&(t=!1),!1!==t){var i=this.list.filter(function(i){return i.id==t})[0];flexbe_cli.stat.ecommerce.remove(i.id,i.title),this.list=this.list.filter(function(i){return i.id!=t}),this.renderList()}},updateCount:function(t,i){var e=this;void 0===t&&(t=!1),void 0===i&&(i="+"),!1!==t&&(this.list&&this.list.length&&(this.list=this.list.map(function(n){if(n.id==t){"+"==i?n.count+=1:"-"==i&&n.count>1?n.count-=1:(i=parseInt(i,10),n.count=i||1),n.count=parseInt(n.count,10)||1;var s=e.$list.find('[data-id="'+t+'"]');s.find(".price").text(flexbe_cli.locale.formatMoney(n.price*n.count)),"-"!==i&&"+"!==i||s.find(".count").val(n.count),flexbe_cli.stat.ecommerce.add(n.id,n.title,n.count,n.price)}return n})),this.saveToStorage(),this.renderCount())},renderList:function(){this.saveToStorage(),this.renderCount();var t="";this.list.length&&this.list.forEach(function(i){var e;t+='<li data-id="'+(e=i).id+'">\n                <div class="img-holder">\n                    <div class="img" '+(e.img&&'style="background-image: url('+e.img+')"')+'></div>\n                </div>\n\n                <div class="item-title">'+e.title+'</div>\n\n                <div class="item-count">\n                    <a data-action="+">\n                        <svg viewBox="0 0 10 7"><path d="M1.4 6.244L5 2.732l3.6 3.512L10 4.878 5 0 0 4.878z" fill-rule="evenodd"/></svg>\n                    </a>\n                    <input type="number" class="count" min="1" value="'+e.count+'"/>\n                    <a data-action="-">\n                        <svg viewBox="0 0 10 7"><path d="M1.4.756L5 4.268 8.6.756 10 2.122 5 7 0 2.122z" fill-rule="evenodd"/></svg>\n                    </a>\n                </div>\n\n                <div class="item-price">\n                    <span class="price">'+flexbe_cli.locale.formatMoney(e.price*e.count)+'</span>\n                </div>\n\n                <a data-action="remove"><svg viewBox="0 0 11 12"><path d="M2.5 12h6c.825 0 1.5-.58 1.5-1.286V3H1v7.714C1 11.42 1.675 12 2.5 12zm.667-1h4.666C8.475 11 9 10.55 9 10V3H2v7c0 .55.525 1 1.167 1zM8 1L7 0H4L3 1h5zM3 3h1v7H3V3zm2 0h1v7H5V3zm2 0h1v7H7V3zM0 1.5c0-.276.23-.5.5-.5h10c.276 0 .5.232.5.5V2H0v-.5z" fill-rule="evenodd"/></svg></a>\n            </li>'}),this.$list.html(t),this.$container.find(".cart-container").toggleClass("empty",0===this.list.length),this.form&&this.form.addItems(this.list)},renderCount:function(){var t=0,i=0;this.list.length&&this.list.forEach(function(e){e.count&&(t+=parseInt(e.count,10),e.price&&(i+=parseInt(e.count,10)*parseFloat(e.price)))}),this.$sum.text(flexbe_cli.locale.formatMoney(i)),this.$button.attr("data-count",t),this.$container.find(".product-count .count").text(t)},loadFromStorage:function(){if(!flexbe_cli.is_admin&&localStorage)try{var t=JSON.parse(localStorage.getItem("f_cart"));t&&t instanceof Array&&(this.list=t)}catch(t){}},saveToStorage:function(){if(!flexbe_cli.is_admin&&localStorage)if(this.list&&this.list instanceof Array)try{localStorage.setItem("f_cart",JSON.stringify(this.list))}catch(t){}else this.list=[]}});
"use strict";flexbe_cli.widget.register(2,{require:["/_s/lib/anime/anime.min.js"],$list:null,onLoad:function(){var t=this;this.$list=this.$widget.find(".anchors-list"),this.list="object"==typeof this.$list.data("anchors")&&this.$list.data("anchors").list||[],this.style=this.$list.data("anchors").style||1,this.show_title=this.$list.data("anchors").show_title,this.$list.removeAttr("data-anchors"),flexbe_cli.run.is_mobile||(this.drawList(),this.setActive(),flexbe_cli.is_admin&&flexbe_cli.events.off("layout_change.anchors").on("layout_change.anchors",function(i,e){"block"===e.is&&t.drawList()}))},check:function(){var t=$(".b_block").not('[data-b-type*="overflow"]');this.list=this.list.filter(function(i){if(i.enabled&&t.closest('[data-id="'+i.id+'"]')[0])return!0})},drawList:function(){var t=this;if(0===flexbe_cli.block.$blocks.length)return this.$list.hide(),!1;this.$list.show(),this.check();var i="";flexbe_cli.is_admin&&0===this.list.length?i='<svg style="color: #adadad" width="18" height="98" viewBox="0 0 18 98" xmlns="http://www.w3.org/2000/svg">\n                <g fill="none" fill-rule="evenodd">\n                    <circle opacity=".05" cx="9" cy="5" r="5"/>\n                    <circle opacity=".2" cx="9" cy="25" r="5"/>\n                    <circle opacity=".2" cx="9" cy="73" r="5"/>\n                    <circle opacity=".05" cx="9" cy="93" r="5"/>\n                    <path d="M9 40a9 9 0 1 0 0 18 9 9 0 0 0 0-18zm5.126 9.626h-4.5v4.5H8.34v-4.5h-4.5V48.34h4.5v-4.5h1.286v4.5h4.5v1.286z" opacity=".45"/>\n                </g>\n            </svg>':this.list.length>0&&(this.list.forEach(function(e){i+="<li"+(t.show_title&&e.title?' data-title="'+e.title+'"':"")+'><a href="#'+e.id+'"></a></li>'}),i+='<li class="helper"><a></a></li>'),this.$list.find("ul").html(i),this.$helper=this.$list.find(".helper"),this.animateList()},animateList:function(){var t=this;if(0!==this.list.length){if(flexbe_cli.is_admin)this.$helper.css({opacity:1,transform:"translateY("+24*this.index+"px)"});else{var i=anime({targets:this.$list.find("li").not(this.$helper).get(),duration:200,opacity:[0,1],scale:[.4,1],easing:"easeOutBack",autoplay:!1,delay:function(t,i){return 200*i},complete:function(){anime({targets:t.$helper.get(),duration:400,translateY:24*t.index,scale:[2.5,1],opacity:[0,1],easing:"easeInExpo"})}});this.$list.addClass("hide"),setTimeout(function(){t.$list.removeClass("hide"),i.play()},1500)}this.$list.find("li").removeClass("active").eq(this.index).addClass("active")}},index:0,setActive:function(){var t=this;if(0!==this.list.length){var i=function(i){t.$list.css("color",i.tween.color);var e=t.index;t.list.some(function(t,s){if(t.id==i.id)return e=s,!0}),(e=Math.max(0,Math.min(t.list.length-1,e)))!=t.index&&(!function(i){if(t.$list.find("li").removeClass("active"),t.$list.find("li").eq(i).addClass("active"),1==t.style){var e=24*i,s=i-t.index>0?12:-12;anime.remove(t.$helper[0]),anime({targets:t.$helper[0],translateY:e-s,scaleY:2.5,scaleX:.6,duration:100,easing:"easeInQuad",complete:function(){anime({targets:t.$helper[0],translateY:e,scaleY:1,scaleX:1,duration:100,easing:"easeOutQuad"})}})}}(e),t.index=e)};flexbe_cli.block.$list.find(".b_block").each(function(t,e){var s=e._core;s&&s.isFocused&&i(s)}),flexbe_cli.events.off("entity_event.anchors").on("entity_event.anchors",function(t,e){e&&e.type&&"focus"==e.type&&e.state&&e.core&&"block"===e.core.is&&i(e.core)}),this.$list.on("click","li",function(t){if(!$(t.target).is("a"))return $(t.currentTarget).find("[href]").trigger("click"),t.preventDefault(),!1})}}});